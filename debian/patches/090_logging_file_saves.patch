--- gtk+-2.24.10.gnome/gtk/gtkrecentmanager.c	2012-02-06 21:52:29.917827141 +0100
+++ gtk+-2.24.10/gtk/gtkrecentmanager.c	2012-02-06 21:56:17.109838137 +0100
@@ -892,7 +892,7 @@
   GtkRecentManager *manager = user_data;
   GtkRecentData recent_data;
   GFileInfo *file_info;
-  gchar *uri;
+  gchar *uri, *basename;
 
   uri = g_file_get_uri (file);
 
@@ -916,7 +916,11 @@
       g_object_unref (file_info);
     }
   else
-    recent_data.mime_type = g_strdup (GTK_RECENT_DEFAULT_MIME); /* FIXME: maybe we should make up the MIME type from the filename's extension */
+    {
+      basename = g_file_get_basename (file);
+      recent_data.mime_type = g_content_type_guess (basename, NULL, 0, NULL);
+      g_free (basename);
+    }
 
   recent_data.app_name = g_strdup (g_get_application_name ());
   recent_data.app_exec = g_strjoin (" ", g_get_prgname (), "%u", NULL);
